# Staging Environment Values
# Used for staging deployments: helm install -f values-staging.yaml
# Override the base values.yaml for staging-specific configurations

global:
  namespace: staging
  labels:
    environment: staging

mainwebsite:
  replicaCount: 2
  
  image:
    tag: "staging-latest"
    pullPolicy: IfNotPresent
  
  resources:
    limits:
      cpu: 400m
      memory: 384Mi
    requests:
      cpu: 200m
      memory: 192Mi
  
  autoscaling:
    enabled: true
    minReplicas: 2
    maxReplicas: 4
    targetCPUUtilizationPercentage: 75
    targetMemoryUtilizationPercentage: 75

metrics:
  replicaCount: 1
  
  image:
    tag: "staging-latest"
    pullPolicy: IfNotPresent
  
  resources:
    limits:
      cpu: 300m
      memory: 192Mi
    requests:
      cpu: 150m
      memory: 96Mi
  
  autoscaling:
    enabled: true
    minReplicas: 1
    maxReplicas: 2
    targetCPUUtilizationPercentage: 80

podSecurityContext:
  runAsNonRoot: true
  runAsUser: 1000
  fsGroup: 1000

securityContext:
  allowPrivilegeEscalation: false
  capabilities:
    drop:
      - ALL
  readOnlyRootFilesystem: true

ingress:
  enabled: true
  mainwebsite:
    hostname: staging.oleksandrdesign.com
  metrics:
    hostname: metrics-staging.oleksandrdesign.com

monitoring:
  enabled: true
  serviceMonitor:
    enabled: true
    interval: 30s

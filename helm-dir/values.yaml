# GCP Info Website - Helm Values
# Default configuration for mainwebsite Helm chart

# Global configuration
global:
  namespace: default
  labels: {}
  annotations: {}

# Main Website Service Configuration
mainwebsite:
  enabled: true
  replicaCount: 1
  
  image:
    repository: gcr.io/clever-spirit-417020/mainwebsite
    pullPolicy: IfNotPresent
    tag: "latest"
  
  service:
    type: ClusterIP
    port: 80
    targetPort: 3000
  
  resources:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 250m
      memory: 256Mi
  
  probes:
    liveness:
      httpGet:
        path: /
        port: http
      initialDelaySeconds: 30
      periodSeconds: 10
      timeoutSeconds: 5
      failureThreshold: 3
    
    readiness:
      httpGet:
        path: /
        port: http
      initialDelaySeconds: 5
      periodSeconds: 5
      timeoutSeconds: 3
      failureThreshold: 3
  
  env:
    - name: recaptcha_key
      valueFrom:
        secretKeyRef:
          name: recaptcha
          key: recaptcha
  
  autoscaling:
    enabled: false
    minReplicas: 1
    maxReplicas: 3
    targetCPUUtilizationPercentage: 80
    targetMemoryUtilizationPercentage: 80
  
  nodeSelector: {}
  affinity: {}
  tolerations: []

# Metrics Service Configuration
metrics:
  enabled: true
  replicaCount: 1
  
  image:
    repository: gcr.io/clever-spirit-417020/metrics
    pullPolicy: IfNotPresent
    tag: "latest"
  
  service:
    type: ClusterIP
    port: 80
    targetPort: 3001
  
  resources:
    limits:
      cpu: 500m
      memory: 256Mi
    requests:
      cpu: 250m
      memory: 128Mi
  
  probes:
    liveness:
      httpGet:
        path: /
        port: http
      initialDelaySeconds: 30
      periodSeconds: 10
      timeoutSeconds: 5
      failureThreshold: 3
    
    readiness:
      httpGet:
        path: /
        port: http
      initialDelaySeconds: 5
      periodSeconds: 5
      timeoutSeconds: 3
      failureThreshold: 3
  
  autoscaling:
    enabled: false
    minReplicas: 1
    maxReplicas: 2
    targetCPUUtilizationPercentage: 80
  
  nodeSelector: {}
  affinity: {}
  tolerations: []

# Service Account
serviceAccount:
  create: true
  automount: true
  annotations: {}
  name: ""

# Pod Security Context
podSecurityContext:
  runAsNonRoot: true
  runAsUser: 1000
  fsGroup: 1000

# Container Security Context
securityContext:
  allowPrivilegeEscalation: false
  capabilities:
    drop:
      - ALL
  readOnlyRootFilesystem: true

# Ingress Configuration (using Traefik IngressRoute)
ingress:
  enabled: true
  className: traefik
  
  mainwebsite:
    hostname: oleksandrdesign.com
    entrypoint: web
    middlewares: []
  
  metrics:
    hostname: metrics.oleksandrdesign.com
    entrypoint: web
    middlewares: []

# Image Pull Secrets
imagePullSecrets: []

# Pod Annotations
podAnnotations: {}

# Pod Labels
podLabels: {}

# Monitoring/Prometheus
monitoring:
  enabled: true
  serviceMonitor:
    enabled: true
    interval: 30s
    path: /metrics
    labels: {}
  
  prometheus:
    enabled: true
    interval: 30s

# RBAC
rbac:
  create: true
  
# Volume mounts
volumes: []
volumeMounts: []

